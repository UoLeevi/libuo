#ifndef UO_MACRO_H
#define UO_MACRO_H

#ifdef __cplusplus
extern "C" {
#endif

/**
 * @brief get string literal corresponding a token
 *
 */
#define uo_nameof(n) \
    UO__NAMEOF(n)

/**
 * @brief create a variable name that is unlikely to collide with macro arguments
 * 
 */
#define uo_var(ident) \
    uo_cat(ident, __LINE__)

/**
 * @brief count the number of arguments
 * 
 */
#define uo_narg(...) \
    UO_NARG_(__VA_ARGS__,UO_RSEQ_N())

/**
 * @brief concatenate tokens
 * 
 */
#define uo_cat(x, y) \
    UO_CAT(x, y)


#define UO_STRLEN(s) (sizeof(s)/sizeof(s[0]) - 1)

#define UO__NAMEOF(n) #n

#define UO_CAT(x, y) x ## y

#define UO_NARG_(...) UO_ARG_N(__VA_ARGS__)

#define UO_ARG_N( \
           _0x01, _0x02, _0x03, _0x04, _0x05, _0x06, _0x07, _0x08, _0x09, _0x0A, _0x0B, _0x0C, _0x0D, _0x0E, _0x0F, \
    _0x10, _0x11, _0x12, _0x13, _0x14, _0x15, _0x16, _0x17, _0x18, _0x19, _0x1A, _0x1B, _0x1C, _0x1D, _0x1E, _0x1F, \
    _0x20, _0x21, _0x22, _0x23, _0x24, _0x25, _0x26, _0x27, _0x28, _0x29, _0x2A, _0x2B, _0x2C, _0x2D, _0x2E, _0x2F, \
    _0x30, _0x31, _0x32, _0x33, _0x34, _0x35, _0x36, _0x37, _0x38, _0x39, _0x3A, _0x3B, _0x3C, _0x3D, _0x3E, _0x3F, \
    N, ...) N
#define UO_RSEQ_N() \
    0x3F, 0x3E, 0x3D, 0x3C, 0x3B, 0x3A, 0x39, 0x38, 0x37, 0x36, 0x35, 0x34, 0x33, 0x32, 0x31, 0x30, \
    0x2F, 0x2E, 0x2D, 0x2C, 0x2B, 0x2A, 0x29, 0x28, 0x27, 0x26, 0x25, 0x24, 0x23, 0x22, 0x21, 0x20, \
    0x1F, 0x1E, 0x1D, 0x1C, 0x1B, 0x1A, 0x19, 0x18, 0x17, 0x16, 0x15, 0x14, 0x13, 0x12, 0x11, 0x10, \
    0x0F, 0x0E, 0x0D, 0x0C, 0x0B, 0x0A, 0x09, 0x08, 0x07, 0x06, 0x05, 0x04, 0x03, 0x02, 0x01, 0x00

#ifdef __cplusplus
}
#endif

#endif
